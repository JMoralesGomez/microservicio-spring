trigger:
- feature-ms-joaquinMorales-mensaje

pool:
  vmImage: ubuntu-latest
  displayName: Build

steps:
- task: Gradle@3
  inputs:
    gradleWrapperFile: 'gradlew'
    tasks: 'build'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
    javaHomeOption: 'JDKVersion'
    sonarQubeRunAnalysis: false
    spotBugsAnalysis: false
  displayName: Build

#- task: SonarCloudPrepare@1
#  inputs:
#    SonarCloud: 'SonaCloud'
#    organization: 'jmoralesgomez'
#    projectKey: JMoralesGomez_microservicio-spring
#    projectName: 'microservicio-spring'
#  displayName: 'SonarCloud Prepare'

#- task: Gradle@3
#  inputs:
#    gradleWrapperFile: 'gradlew'
#    tasks: 'SonarQube'
#    publishJUnitResults: false
#    javaHomeOption: 'JDKVersion'
#    sonarQubeRunAnalysis: true
#    sqGradlePluginVersionChoice: 'specify'
#    sonarQubeGradlePluginVersion: '3.3'
#    spotBugsAnalysis: false


#- task: Docker@2
#  inputs:
#    containerRegistry: 'Docker'
#    command: 'login'

#- task: Docker@2
#  inputs:
#    containerRegistry: 'Docker'
#    repository: 'pruebajoaquin/laboratoriofinal'
#    command: 'build'
#    Dockerfile: '**/Dockerfile'

- task: Docker@2
#  inputs:
#    containerRegistry: 'Docker'
#    repository: 'pruebajoaquin/laboratoriofinal'
#    command: 'push'

- script: 'jmeter -n -t pruebas.jmx -l results.jtl'


